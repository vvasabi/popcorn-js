<!DOCTYPE html>
<html>
    <head>
        <title>Popcorn Vimeo Player Example</title>
        <style>
            iframe{
                display:block;
                border:0;
            }
            body > div {
                width: 100%;
                float: left;
                overflow: hidden;
            }
            div div {
                margin-bottom:20px;
            }

            .api_output {
                float:right;
                padding-left: 20px;
            }
        </style>
        
        
        <script src="../../popcorn.js"></script>
        <script type="text/javascript" src="popcorn.vimeo.js"></script>
        <script src="../../plugins/footnote/popcorn.footnote.js"></script>
        
        <script type="text/javascript">
            // Called as onload function
            // Set up interface controls
            VimeoEmbedLoaded = function( player ) {
                var loop = 0,
                    volume = 1;
                
                // Hook up custom controls
                // Single play/pause buttons
                document.getElementById( "btnPlay" ).addEventListener( "click", function(e) {
                  player.play();
                }, false);
                
                document.getElementById( "btnPause" ).addEventListener( "click", function(e) {
                    player.pause();
                }, false);
                
                //Seek
                document.getElementById( "btnSeek" ).addEventListener( "click", function() {
                  player.currentTime( 30 );
                }, false);

                // Loop
                document.getElementById( "btnLoop" ).addEventListener( "click", function() {
                  loop = loop === "loop" ? "" : "loop";
                  player.loop( loop );
                }, false);

                // Volume
                document.getElementById( "btnVolume" ).addEventListener( "click", function() {
                  volume = volume === 1 ? 0.5 : 1;
                  player.volume( volume );
                }, false);
                
                // Mute
                document.getElementById( "btnMute" ).addEventListener( "click", function() {
                  player.mute();
                }, false);
                
                // Hook into player events
                // Timeupdate, as the video plays
                player.listen( "timeupdate", function() {
                  document.getElementById( "player_time" ).innerHTML = player.currentTime();
                });
                
                // When the volume changes
                player.listen( "volumechange", function() {
                  document.getElementById( "player_vol" ).innerHTML = player.volume();
                });
                
                // When the video duration changes
                player.listen( "durationchange", function() {
                  document.getElementById( "player_duration" ).innerHTML = player.duration();
                });
                
                // When the meddia ready state changes
                player.listen( "readystatechange", function() {
                  document.getElementById( "player_state" ).innerHTML = player.readyState();
                });
                
                // Output some initial UI values so we caan see what the player is doing
                document.getElementById( "player_time" ).innerHTML = player.currentTime();
                document.getElementById( "player_vol" ).innerHTML = player.volume();
            };

            //On document ready
            document.addEventListener( "DOMContentLoaded", function() {
              var player = Popcorn.vimeo( "player_1", "http://vimeo.com/11127501" )
                    .footnote({
                      start: 5, // seconds
                      end: 40, // seconds
                      text: 'The video is "RiP: A Remix Manifesto", by Brett Gaylor',
                      target: 'footnotediv'
                    })
                    .listen( "load", function() {
                      VimeoEmbedLoaded( player );
                    })
                    .listen( "loadstart", function() {
                      document.getElementById( "player_load" ).innerHTML = "Started";
                    });
            }, false);
        </script>
    </head>
    <body>
        <div>
           <div style="float:right;">
            <h3>Description</h3>
            <p>
              This demo will showcase how a Vimeo flash video can be integrated into Popcorn. This  is done by making the flash video masquerade as HTML 5 video.<br />
              Due to the Flash security model, this demo must be  run from a web server<br />
              From 5 to 40 seconds, the footnote 'The video is "RiP: A Remix Manifesto", by Brett Gaylor' will appear below 'Footnote Area'.
            <hr >
              Vimeo does not support their player to be chromeless (hidden controls), but custsom controls have been developed and tied into their player.<br />
              Clicking play/pause or seeking in either the video or via custsom controls will cause the other to update.<br />
              Clicking on the embed option in the Vimeo player while the video is playing will cause the video to pause and custom controls to update.<br />
              The vimeo video can be specified in the HTML source by giving the vimeo web site url (http://vimeo.com/VIDEOID) to either the VimeoEngine or as the iframe src attribute.<br/>
            </p>
            <br />
            <br />
            <br />
            <div id="footnotediv" width="50%" height="50%">
              <strong>Footnote Area</strong><br />
            </div>
          </div>
          <iframe id="player_1" width="500" height="281" frameborder="0"></iframe>
          <button class="simple" id="btnPlay">Play</button>
          <button class="simple" id="btnPause">Pause</button>
          <button class="seek" id="btnSeek">Seek to 30</button>
          <button class="loop" id="btnLoop">Toggle Loop</button>
          <button class="volume" id="btnVolume">Toggle Volume</button>
          <button class="volume" id="btnMute">Mute</button>
          <div>
            Current Time (s): <span id="player_time"></span>
            <br />Video Duration (s): <span id="player_duration"></span>
            <br />Volume (0-1): <span id="player_vol"></span>
            <br />Load Status: <span id="player_load">Not Started</span>
          </div>
        </div>
    </body>
</html>