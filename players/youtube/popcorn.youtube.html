<!DOCTYPE html>
<html>
  <head>
    <title>Popcorn Youtube Player Example</title>
      <script src="../../popcorn.js"></script>
      <script type="text/javascript" src="popcorn.youtube.js"></script>
      <script>
        // <![CDATA[

        /* Some code on this page is taken from stevenaw's vimeo plug-in. */

        // Helper function to get elements
        function element(id) {
          return document.getElementById(id);
        }

        // Register YouTube
        function onYouTubePlayerReady() {
          element('player-status').innerHTML = 'Ready';

          var youcorn = new Popcorn.Youtube(element('video'));
          var popcorn = Popcorn(youcorn);
          element('player-duration').innerHTML = popcorn.duration();

          // Update time
          popcorn.listen('timeupdate', function() {
            element('player-time').innerHTML = popcorn.currentTime();
          });

          // Update button labels
          var paused = true;
          popcorn.listen('play', function() {
            paused = false;
            element('btn-play-pause').innerHTML = 'Pause';
          });
          popcorn.listen('pause', function() {
            paused = true;
            element('btn-play-pause').innerHTML = 'Play';
          });

          // Single play/pause button
          element('btn-play-pause').addEventListener('click', function() {
            if (paused) {
              popcorn.play();
            } else {
              popcorn.pause();
            }
          }, false);

          // Seek
          element('btn-seek').addEventListener('click', function() {
            popcorn.currentTime(30);
          }, false);

          // Volume
          element('btn-volume').addEventListener('click', function() {
            var volume = (popcorn.volume() === 1) ? 0.5 : 1;
            popcorn.volume(volume);
          }, false);
        }
      // ]]>
    </script>
  </head>
  <body>
    <div>
      <object id="video" type="application/x-shockwave-flash"
        data="http://www.youtube.com/e/ac7KhViaVqc?enablejsapi=1&amp;version=3"
        width="250" height="200">
        <param name="allowFullScreen" value="true" />
        <param name="allowscriptaccess" value="always" />
      </object>
    </div>
    <div>
      <button class="simple" id="btn-play-pause">Play</button>
      <button class="seek" id="btn-seek">Seek to 30</button>
      <button class="volume" id="btn-volume">Toggle Volume</button>
      <div>
        <ul>
          <li>Status: <span id="player-status">Not Ready</span></li>
          <li>Current Time (s): <span id="player-time"></span></li>
          <li>Video Duration (s): <span id="player-duration"></span></li>
        </ul>
      </div>
      <div id="footnotediv" width="50%" height="50%"></div>
    </div>
  </body>
</html>

